<!DOCTYPE html>
<html>

<head>
    <title>BMI Calculator</title>

    <meta charset="UTF-8" />
    <style media="screen"></style>
    <style>
        body {
            background-color: #242424;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            color: rgb(221, 204, 182);
        }
    </style>
    <script crossorigin src="https://unpkg.com/react@16/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@16/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>

</head>

<body>

    <div id="root"></div>

    <script type="text/babel">

        class BMI extends React.Component {
            constructor(props) {
                super(props)
                console.log('constructor')

                this.state = {
                    'weight': '',
                    'height': '',
                    'bmi': ''
                }
            }

            componentDidMount = () => {
                console.log('componentDidMount')
            }

            componentWillUnmount = () => {
                console.log('componentWillUnmount')
            }

            handleWeight = event => {
                console.log('handleWeight')
                this.setState({ weight: event.target.value }, this.calculateBMI)
            }

            handleHeight = event => {
                console.log('handleHeight')
                this.setState({ height: event.target.value }, this.calculateBMI)
            }

            calculateBMI = () => {
                console.log('calculateBMI')
                // Checks for valid user input
                if (this.state.weight > 0 && this.state.height > 0) {
                    this.setState({ bmi: (this.state.weight / (this.state.height * this.state.height)).toFixed(2) })
                } else {
                    this.setState({ bmi: 'Awaiting correct values...' })
                }
            }

            render = () => {
                console.log('render')
                return (
                    <div>
                        <h1>BMI calculator</h1>
                        <form>
                            <label for="weight">Weight (in kilograms):</label>
                            <br />
                            <input
                                type="text"
                                id="weight"
                                name="weight"
                                value={this.state.weight}
                                onChange={this.handleWeight}
                            />
                            <br /><br />

                            <label for="height">Height (in meters):</label>
                            <br />
                            <input
                                type="text"
                                id="height"
                                name="height"
                                value={this.state.height}
                                onChange={this.handleHeight}
                            />
                            <br /><br />

                            <p>Your BMI is: {this.state.bmi}</p>

                        </form>
                    </div>
                )
            }
        }

        ReactDOM.render(
            <BMI />, document.getElementById('root')
        )

    </script>

</body>

</html>
